"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./lib/websocket-manager.ts":
/*!**********************************!*\
  !*** ./lib/websocket-manager.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocketManager: function() { return /* binding */ WebSocketManager; }\n/* harmony export */ });\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"(app-pages-browser)/./node_modules/socket.io-client/build/esm/index.js\");\n\nclass WebSocketManager {\n    static getInstance() {\n        if (!WebSocketManager.instance) {\n            WebSocketManager.instance = new WebSocketManager();\n        }\n        return WebSocketManager.instance;\n    }\n    initializeSocket(url) {\n        console.log(\"[DEBUG] WebSocketManager: Initializing socket with URL:\", url);\n        try {\n            this.socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(url, {\n                transports: [\n                    \"websocket\"\n                ],\n                reconnection: true,\n                reconnectionAttempts: this.maxReconnectAttempts,\n                reconnectionDelay: this.reconnectDelay,\n                reconnectionDelayMax: this.maxReconnectDelay,\n                timeout: 20000,\n                autoConnect: false,\n                withCredentials: true,\n                path: \"/socket.io\"\n            });\n            console.log(\"[DEBUG] WebSocketManager: Socket instance created:\", !!this.socket);\n            this.setupEventHandlers();\n        } catch (error) {\n            console.error(\"[DEBUG] WebSocketManager: Failed to initialize socket:\", error);\n            this.notifyError(\"Socket initialization failed: \".concat(error.message));\n        }\n    }\n    setupEventHandlers() {\n        console.log(\"[DEBUG] WebSocketManager: Setting up event handlers\");\n        if (!this.socket) {\n            console.warn(\"[DEBUG] WebSocketManager: Cannot setup event handlers: socket not initialized\");\n            return;\n        }\n        this.socket.on(\"connect\", ()=>{\n            console.log(\"[DEBUG] WebSocketManager: Connected to WebSocket server with ID:\", this.socket.id);\n            this.isConnected = true;\n            this.reconnectAttempts = 0;\n            this.flushAudioBuffer();\n            this.notifyConnectionStatus(true);\n        });\n        this.socket.on(\"disconnect\", (reason)=>{\n            console.log(\"[DEBUG] WebSocketManager: Disconnected from WebSocket server. Reason:\", reason);\n            this.isConnected = false;\n            this.notifyConnectionStatus(false);\n        });\n        this.socket.on(\"connect_error\", (error)=>{\n            console.error(\"[DEBUG] WebSocketManager: Connection error:\", error);\n            console.log(\"[DEBUG] WebSocketManager: Reconnect attempts:\", this.reconnectAttempts);\n            this.isConnected = false;\n            this.reconnectAttempts++;\n            this.notifyError(\"Connection error: \".concat(error.message || \"Unknown error\"));\n        });\n        this.socket.on(\"error\", (error)=>{\n            console.error(\"[DEBUG] WebSocketManager: WebSocket error:\", error);\n            this.notifyError(\"WebSocket error: \".concat(error));\n        });\n        this.socket.on(\"transcription\", (text)=>{\n            console.log(\"[DEBUG] WebSocketManager: Received transcription:\", text);\n            this.notifyTranscription(text);\n        });\n    }\n    connect() {\n        console.log(\"[DEBUG] WebSocketManager: Connect called. Socket exists:\", !!this.socket);\n        if (this.socket && !this.socket.connected) {\n            console.log(\"[DEBUG] WebSocketManager: Initiating WebSocket connection...\");\n            this.socket.connect();\n        } else if (!this.socket) {\n            console.log(\"[DEBUG] WebSocketManager: Socket not initialized yet, waiting...\");\n            setTimeout(()=>this.connect(), 2000);\n        }\n    }\n    disconnect() {\n        console.log(\"[DEBUG] WebSocketManager: Disconnect called. Socket exists:\", !!this.socket);\n        if (this.socket) {\n            this.socket.disconnect();\n        }\n        this.audioBuffer = [];\n        this.isConnected = false;\n    }\n    sendAudio(chunk) {\n        if (!chunk || chunk.length === 0) {\n            console.warn(\"[DEBUG] WebSocketManager: Attempted to send empty audio chunk\");\n            return;\n        }\n        console.log(\"[DEBUG] WebSocketManager: Sending audio chunk. Connected:\", this.isConnected, \"Socket exists:\", !!this.socket);\n        if (this.isConnected && this.socket) {\n            try {\n                this.socket.emit(\"audio\", chunk);\n            } catch (error) {\n                console.error(\"[DEBUG] WebSocketManager: Error sending audio chunk:\", error);\n                this.notifyError(\"Failed to send audio data\");\n            }\n        } else {\n            console.log(\"[DEBUG] WebSocketManager: Socket not connected, buffering audio chunk\");\n            this.audioBuffer.push(chunk);\n            if (this.audioBuffer.length > 100) {\n                this.audioBuffer.shift();\n            }\n        }\n    }\n    flushAudioBuffer() {\n        if (this.audioBuffer.length > 0) {\n            console.log(\"Flushing \".concat(this.audioBuffer.length, \" buffered audio chunks\"));\n            while(this.audioBuffer.length > 0){\n                const chunk = this.audioBuffer.shift();\n                if (chunk) {\n                    this.sendAudio(chunk);\n                }\n            }\n        }\n    }\n    // Event subscription methods\n    onTranscription(callback) {\n        this.transcriptionCallbacks.add(callback);\n        return ()=>this.transcriptionCallbacks.delete(callback);\n    }\n    onError(callback) {\n        this.errorCallbacks.add(callback);\n        return ()=>this.errorCallbacks.delete(callback);\n    }\n    onConnectionChange(callback) {\n        this.connectionCallbacks.add(callback);\n        return ()=>this.connectionCallbacks.delete(callback);\n    }\n    // Event notification methods\n    notifyTranscription(text) {\n        this.transcriptionCallbacks.forEach((callback)=>callback(text));\n    }\n    notifyError(error) {\n        this.errorCallbacks.forEach((callback)=>callback(error));\n    }\n    notifyConnectionStatus(status) {\n        this.connectionCallbacks.forEach((callback)=>callback(status));\n    }\n    // Status methods\n    isSocketConnected() {\n        return this.isConnected;\n    }\n    getReconnectAttempts() {\n        return this.reconnectAttempts;\n    }\n    getSocketId() {\n        var _this_socket;\n        return ((_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.id) || null;\n    }\n    constructor(){\n        this.audioBuffer = [];\n        this.isConnected = false;\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = 5;\n        this.reconnectDelay = 1000;\n        this.maxReconnectDelay = 5000;\n        this.transcriptionCallbacks = new Set();\n        this.errorCallbacks = new Set();\n        this.connectionCallbacks = new Set();\n        console.log(\"[DEBUG] WebSocketManager: Constructor called\");\n        const initSocket = async ()=>{\n            console.log(\"[DEBUG] WebSocketManager: Initializing socket connection\");\n            try {\n                var _data_websocket;\n                console.log(\"[DEBUG] WebSocketManager: Fetching WebSocket URL from\", window.location.origin);\n                // First, try to get the WebSocket URL from the server\n                const response = await fetch(window.location.origin, {\n                    headers: {\n                        \"Accept\": \"application/json\",\n                        \"Content-Type\": \"application/json\"\n                    },\n                    credentials: \"include\"\n                });\n                console.log(\"[DEBUG] WebSocketManager: Server response status:\", response.status);\n                if (!response.ok) {\n                    throw new Error(\"Server responded with status: \".concat(response.status));\n                }\n                const data = await response.json();\n                console.log(\"[DEBUG] WebSocketManager: Server response data:\", data);\n                if (!(data === null || data === void 0 ? void 0 : (_data_websocket = data.websocket) === null || _data_websocket === void 0 ? void 0 : _data_websocket.url)) {\n                    throw new Error(\"Invalid server response: missing websocket URL\");\n                }\n                const SOCKET_URL = data.websocket.url;\n                console.log(\"[DEBUG] WebSocketManager: Using server provided WebSocket URL:\", SOCKET_URL);\n                this.initializeSocket(SOCKET_URL);\n            } catch (error) {\n                console.error(\"[DEBUG] WebSocketManager: Failed to get WebSocket URL from server:\", error);\n                // Fallback to constructing URL based on current location\n                const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n                const SOCKET_URL = \"\".concat(protocol, \"//\").concat(window.location.hostname);\n                console.log(\"[DEBUG] WebSocketManager: Using fallback WebSocket URL:\", SOCKET_URL);\n                this.initializeSocket(SOCKET_URL);\n            }\n        };\n        // Start initialization\n        initSocket();\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi93ZWJzb2NrZXQtbWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQWV2QyxNQUFNQztJQWFYLE9BQWNDLGNBQWdDO1FBQzVDLElBQUksQ0FBQ0QsaUJBQWlCRSxRQUFRLEVBQUU7WUFDOUJGLGlCQUFpQkUsUUFBUSxHQUFHLElBQUlGO1FBQ2xDO1FBQ0EsT0FBT0EsaUJBQWlCRSxRQUFRO0lBQ2xDO0lBZ0RRQyxpQkFBaUJDLEdBQVcsRUFBUTtRQUMxQ0MsUUFBUUMsR0FBRyxDQUFDLDJEQUEyREY7UUFDdkUsSUFBSTtZQUNGLElBQUksQ0FBQ0csTUFBTSxHQUFHUixvREFBRUEsQ0FBQ0ssS0FBSztnQkFDcEJJLFlBQVk7b0JBQUM7aUJBQVk7Z0JBQ3pCQyxjQUFjO2dCQUNkQyxzQkFBc0IsSUFBSSxDQUFDQyxvQkFBb0I7Z0JBQy9DQyxtQkFBbUIsSUFBSSxDQUFDQyxjQUFjO2dCQUN0Q0Msc0JBQXNCLElBQUksQ0FBQ0MsaUJBQWlCO2dCQUM1Q0MsU0FBUztnQkFDVEMsYUFBYTtnQkFDYkMsaUJBQWlCO2dCQUNqQkMsTUFBTTtZQUNSO1lBRUFkLFFBQVFDLEdBQUcsQ0FBQyxzREFBc0QsQ0FBQyxDQUFDLElBQUksQ0FBQ0MsTUFBTTtZQUMvRSxJQUFJLENBQUNhLGtCQUFrQjtRQUN6QixFQUFFLE9BQU9DLE9BQU87WUFDZGhCLFFBQVFnQixLQUFLLENBQUMsMERBQTBEQTtZQUN4RSxJQUFJLENBQUNDLFdBQVcsQ0FBQyxpQ0FBK0MsT0FBZEQsTUFBTUUsT0FBTztRQUNqRTtJQUNGO0lBRVFILHFCQUEyQjtRQUNqQ2YsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2hCRixRQUFRbUIsSUFBSSxDQUFDO1lBQ2I7UUFDRjtRQUVBLElBQUksQ0FBQ2pCLE1BQU0sQ0FBQ2tCLEVBQUUsQ0FBQyxXQUFXO1lBQ3hCcEIsUUFBUUMsR0FBRyxDQUFDLG9FQUFv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Q2xFLFFBQVFDLEdBQUcsQ0FBQyxtREFBbUR1RDtnQkFFL0QsSUFBSSxFQUFDQSxpQkFBQUEsNEJBQUFBLGtCQUFBQSxLQUFNVyxTQUFTLGNBQWZYLHNDQUFBQSxnQkFBaUJ6RCxHQUFHLEdBQUU7b0JBQ3pCLE1BQU0sSUFBSWtFLE1BQU07Z0JBQ2xCO2dCQUVBLE1BQU1HLGFBQWFaLEtBQUtXLFNBQVMsQ0FBQ3BFLEdBQUc7Z0JBQ3JDQyxRQUFRQyxHQUFHLENBQUMsa0VBQWtFbUU7Z0JBQzlFLElBQUksQ0FBQ3RFLGdCQUFnQixDQUFDc0U7WUFDeEIsRUFBRSxPQUFPcEQsT0FBTztnQkFDZGhCLFFBQVFnQixLQUFLLENBQUMsc0VBQXNFQTtnQkFFcEYseURBQXlEO2dCQUN6RCxNQUFNcUQsV0FBV1osT0FBT0MsUUFBUSxDQUFDVyxRQUFRLEtBQUssV0FBVyxTQUFTO2dCQUNsRSxNQUFNRCxhQUFhLEdBQWdCWCxPQUFiWSxVQUFTLE1BQTZCLE9BQXpCWixPQUFPQyxRQUFRLENBQUNZLFFBQVE7Z0JBRTNEdEUsUUFBUUMsR0FBRyxDQUFDLDJEQUEyRG1FO2dCQUN2RSxJQUFJLENBQUN0RSxnQkFBZ0IsQ0FBQ3NFO1lBQ3hCO1FBQ0Y7UUFFQSx1QkFBdUI7UUFDdkJiO0lBQ0Y7QUFpS0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL3dlYnNvY2tldC1tYW5hZ2VyLnRzPzdkZDQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBTb2NrZXQsIGlvIH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5cbmludGVyZmFjZSBTZXJ2ZXJUb0NsaWVudEV2ZW50cyB7XG4gIHRyYW5zY3JpcHRpb246ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQ2xpZW50VG9TZXJ2ZXJFdmVudHMge1xuICBhdWRpbzogKGNodW5rOiBCdWZmZXIpID0+IHZvaWQ7XG59XG5cbnR5cGUgVHJhbnNjcmlwdGlvbkNhbGxiYWNrID0gKHRleHQ6IHN0cmluZykgPT4gdm9pZDtcbnR5cGUgRXJyb3JDYWxsYmFjayA9IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xudHlwZSBDb25uZWN0aW9uQ2FsbGJhY2sgPSAoc3RhdHVzOiBib29sZWFuKSA9PiB2b2lkO1xuXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0TWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBXZWJTb2NrZXRNYW5hZ2VyO1xuICBwcml2YXRlIHNvY2tldDogU29ja2V0PFNlcnZlclRvQ2xpZW50RXZlbnRzLCBDbGllbnRUb1NlcnZlckV2ZW50cz47XG4gIHByaXZhdGUgYXVkaW9CdWZmZXI6IEJ1ZmZlcltdID0gW107XG4gIHByaXZhdGUgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4UmVjb25uZWN0QXR0ZW1wdHMgPSA1O1xuICBwcml2YXRlIHJlYWRvbmx5IHJlY29ubmVjdERlbGF5ID0gMTAwMDtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhSZWNvbm5lY3REZWxheSA9IDUwMDA7XG4gIHByaXZhdGUgdHJhbnNjcmlwdGlvbkNhbGxiYWNrczogU2V0PFRyYW5zY3JpcHRpb25DYWxsYmFjaz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgZXJyb3JDYWxsYmFja3M6IFNldDxFcnJvckNhbGxiYWNrPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uQ2FsbGJhY2tzOiBTZXQ8Q29ubmVjdGlvbkNhbGxiYWNrPiA9IG5ldyBTZXQoKTtcblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IFdlYlNvY2tldE1hbmFnZXIge1xuICAgIGlmICghV2ViU29ja2V0TWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgV2ViU29ja2V0TWFuYWdlci5pbnN0YW5jZSA9IG5ldyBXZWJTb2NrZXRNYW5hZ2VyKCk7XG4gICAgfVxuICAgIHJldHVybiBXZWJTb2NrZXRNYW5hZ2VyLmluc3RhbmNlO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBDb25zdHJ1Y3RvciBjYWxsZWQnKTtcbiAgICBjb25zdCBpbml0U29ja2V0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogSW5pdGlhbGl6aW5nIHNvY2tldCBjb25uZWN0aW9uJyk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBGZXRjaGluZyBXZWJTb2NrZXQgVVJMIGZyb20nLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcbiAgICAgICAgLy8gRmlyc3QsIHRyeSB0byBnZXQgdGhlIFdlYlNvY2tldCBVUkwgZnJvbSB0aGUgc2VydmVyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2god2luZG93LmxvY2F0aW9uLm9yaWdpbiwge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogU2VydmVyIHJlc3BvbnNlIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogU2VydmVyIHJlc3BvbnNlIGRhdGE6JywgZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRhdGE/LndlYnNvY2tldD8udXJsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNlcnZlciByZXNwb25zZTogbWlzc2luZyB3ZWJzb2NrZXQgVVJMJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBTT0NLRVRfVVJMID0gZGF0YS53ZWJzb2NrZXQudXJsO1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBVc2luZyBzZXJ2ZXIgcHJvdmlkZWQgV2ViU29ja2V0IFVSTDonLCBTT0NLRVRfVVJMKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU29ja2V0KFNPQ0tFVF9VUkwpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBGYWlsZWQgdG8gZ2V0IFdlYlNvY2tldCBVUkwgZnJvbSBzZXJ2ZXI6JywgZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gY29uc3RydWN0aW5nIFVSTCBiYXNlZCBvbiBjdXJyZW50IGxvY2F0aW9uXG4gICAgICAgIGNvbnN0IHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyA/ICd3c3M6JyA6ICd3czonO1xuICAgICAgICBjb25zdCBTT0NLRVRfVVJMID0gYCR7cHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX1gO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogVXNpbmcgZmFsbGJhY2sgV2ViU29ja2V0IFVSTDonLCBTT0NLRVRfVVJMKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU29ja2V0KFNPQ0tFVF9VUkwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBTdGFydCBpbml0aWFsaXphdGlvblxuICAgIGluaXRTb2NrZXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVNvY2tldCh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IEluaXRpYWxpemluZyBzb2NrZXQgd2l0aCBVUkw6JywgdXJsKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zb2NrZXQgPSBpbyh1cmwsIHtcbiAgICAgICAgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnXSxcbiAgICAgICAgcmVjb25uZWN0aW9uOiB0cnVlLFxuICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cyxcbiAgICAgICAgcmVjb25uZWN0aW9uRGVsYXk6IHRoaXMucmVjb25uZWN0RGVsYXksXG4gICAgICAgIHJlY29ubmVjdGlvbkRlbGF5TWF4OiB0aGlzLm1heFJlY29ubmVjdERlbGF5LFxuICAgICAgICB0aW1lb3V0OiAyMDAwMCxcbiAgICAgICAgYXV0b0Nvbm5lY3Q6IGZhbHNlLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgIHBhdGg6ICcvc29ja2V0LmlvJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IFNvY2tldCBpbnN0YW5jZSBjcmVhdGVkOicsICEhdGhpcy5zb2NrZXQpO1xuICAgICAgdGhpcy5zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzb2NrZXQ6JywgZXJyb3IpO1xuICAgICAgdGhpcy5ub3RpZnlFcnJvcihgU29ja2V0IGluaXRpYWxpemF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBFdmVudEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IFNldHRpbmcgdXAgZXZlbnQgaGFuZGxlcnMnKTtcbiAgICBpZiAoIXRoaXMuc29ja2V0KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogQ2Fubm90IHNldHVwIGV2ZW50IGhhbmRsZXJzOiBzb2NrZXQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBDb25uZWN0ZWQgdG8gV2ViU29ja2V0IHNlcnZlciB3aXRoIElEOicsIHRoaXMuc29ja2V0LmlkKTtcbiAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgICB0aGlzLmZsdXNoQXVkaW9CdWZmZXIoKTtcbiAgICAgIHRoaXMubm90aWZ5Q29ubmVjdGlvblN0YXR1cyh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKHJlYXNvbikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogRGlzY29ubmVjdGVkIGZyb20gV2ViU29ja2V0IHNlcnZlci4gUmVhc29uOicsIHJlYXNvbik7XG4gICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLm5vdGlmeUNvbm5lY3Rpb25TdGF0dXMoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zb2NrZXQub24oJ2Nvbm5lY3RfZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogQ29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBSZWNvbm5lY3QgYXR0ZW1wdHM6JywgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyk7XG4gICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICB0aGlzLm5vdGlmeUVycm9yKGBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zb2NrZXQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IFdlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aGlzLm5vdGlmeUVycm9yKGBXZWJTb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNvY2tldC5vbigndHJhbnNjcmlwdGlvbicsICh0ZXh0KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBSZWNlaXZlZCB0cmFuc2NyaXB0aW9uOicsIHRleHQpO1xuICAgICAgdGhpcy5ub3RpZnlUcmFuc2NyaXB0aW9uKHRleHQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogQ29ubmVjdCBjYWxsZWQuIFNvY2tldCBleGlzdHM6JywgISF0aGlzLnNvY2tldCk7XG4gICAgaWYgKHRoaXMuc29ja2V0ICYmICF0aGlzLnNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IEluaXRpYXRpbmcgV2ViU29ja2V0IGNvbm5lY3Rpb24uLi4nKTtcbiAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVR10gV2ViU29ja2V0TWFuYWdlcjogU29ja2V0IG5vdCBpbml0aWFsaXplZCB5ZXQsIHdhaXRpbmcuLi4nKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jb25uZWN0KCksIDIwMDApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IERpc2Nvbm5lY3QgY2FsbGVkLiBTb2NrZXQgZXhpc3RzOicsICEhdGhpcy5zb2NrZXQpO1xuICAgIGlmICh0aGlzLnNvY2tldCkge1xuICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICB0aGlzLmF1ZGlvQnVmZmVyID0gW107XG4gICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHNlbmRBdWRpbyhjaHVuazogQnVmZmVyKTogdm9pZCB7XG4gICAgaWYgKCFjaHVuayB8fCBjaHVuay5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUud2FybignW0RFQlVHXSBXZWJTb2NrZXRNYW5hZ2VyOiBBdHRlbXB0ZWQgdG8gc2VuZCBlbXB0eSBhdWRpbyBjaHVuaycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IFNlbmRpbmcgYXVkaW8gY2h1bmsuIENvbm5lY3RlZDonLCB0aGlzLmlzQ29ubmVjdGVkLCAnU29ja2V0IGV4aXN0czonLCAhIXRoaXMuc29ja2V0KTtcbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCAmJiB0aGlzLnNvY2tldCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnYXVkaW8nLCBjaHVuayk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IEVycm9yIHNlbmRpbmcgYXVkaW8gY2h1bms6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCdGYWlsZWQgdG8gc2VuZCBhdWRpbyBkYXRhJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUddIFdlYlNvY2tldE1hbmFnZXI6IFNvY2tldCBub3QgY29ubmVjdGVkLCBidWZmZXJpbmcgYXVkaW8gY2h1bmsnKTtcbiAgICAgIHRoaXMuYXVkaW9CdWZmZXIucHVzaChjaHVuayk7XG4gICAgICBpZiAodGhpcy5hdWRpb0J1ZmZlci5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgdGhpcy5hdWRpb0J1ZmZlci5zaGlmdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZmx1c2hBdWRpb0J1ZmZlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hdWRpb0J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRmx1c2hpbmcgJHt0aGlzLmF1ZGlvQnVmZmVyLmxlbmd0aH0gYnVmZmVyZWQgYXVkaW8gY2h1bmtzYCk7XG4gICAgICB3aGlsZSAodGhpcy5hdWRpb0J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5hdWRpb0J1ZmZlci5zaGlmdCgpO1xuICAgICAgICBpZiAoY2h1bmspIHtcbiAgICAgICAgICB0aGlzLnNlbmRBdWRpbyhjaHVuayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBFdmVudCBzdWJzY3JpcHRpb24gbWV0aG9kc1xuICBwdWJsaWMgb25UcmFuc2NyaXB0aW9uKGNhbGxiYWNrOiBUcmFuc2NyaXB0aW9uQ2FsbGJhY2spOiAoKSA9PiB2b2lkIHtcbiAgICB0aGlzLnRyYW5zY3JpcHRpb25DYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy50cmFuc2NyaXB0aW9uQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XG4gIH1cblxuICBwdWJsaWMgb25FcnJvcihjYWxsYmFjazogRXJyb3JDYWxsYmFjayk6ICgpID0+IHZvaWQge1xuICAgIHRoaXMuZXJyb3JDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5lcnJvckNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIG9uQ29ubmVjdGlvbkNoYW5nZShjYWxsYmFjazogQ29ubmVjdGlvbkNhbGxiYWNrKTogKCkgPT4gdm9pZCB7XG4gICAgdGhpcy5jb25uZWN0aW9uQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gICAgcmV0dXJuICgpID0+IHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xuICB9XG5cbiAgLy8gRXZlbnQgbm90aWZpY2F0aW9uIG1ldGhvZHNcbiAgcHJpdmF0ZSBub3RpZnlUcmFuc2NyaXB0aW9uKHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudHJhbnNjcmlwdGlvbkNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHRleHQpKTtcbiAgfVxuXG4gIHByaXZhdGUgbm90aWZ5RXJyb3IoZXJyb3I6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZXJyb3JDYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayhlcnJvcikpO1xuICB9XG5cbiAgcHJpdmF0ZSBub3RpZnlDb25uZWN0aW9uU3RhdHVzKHN0YXR1czogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHN0YXR1cykpO1xuICB9XG5cbiAgLy8gU3RhdHVzIG1ldGhvZHNcbiAgcHVibGljIGlzU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzQ29ubmVjdGVkO1xuICB9XG5cbiAgcHVibGljIGdldFJlY29ubmVjdEF0dGVtcHRzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVjb25uZWN0QXR0ZW1wdHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0U29ja2V0SWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuc29ja2V0Py5pZCB8fCBudWxsO1xuICB9XG59XG4iXSwibmFtZXMiOlsiaW8iLCJXZWJTb2NrZXRNYW5hZ2VyIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImluaXRpYWxpemVTb2NrZXQiLCJ1cmwiLCJjb25zb2xlIiwibG9nIiwic29ja2V0IiwidHJhbnNwb3J0cyIsInJlY29ubmVjdGlvbiIsInJlY29ubmVjdGlvbkF0dGVtcHRzIiwibWF4UmVjb25uZWN0QXR0ZW1wdHMiLCJyZWNvbm5lY3Rpb25EZWxheSIsInJlY29ubmVjdERlbGF5IiwicmVjb25uZWN0aW9uRGVsYXlNYXgiLCJtYXhSZWNvbm5lY3REZWxheSIsInRpbWVvdXQiLCJhdXRvQ29ubmVjdCIsIndpdGhDcmVkZW50aWFscyIsInBhdGgiLCJzZXR1cEV2ZW50SGFuZGxlcnMiLCJlcnJvciIsIm5vdGlmeUVycm9yIiwibWVzc2FnZSIsIndhcm4iLCJvbiIsImlkIiwiaXNDb25uZWN0ZWQiLCJyZWNvbm5lY3RBdHRlbXB0cyIsImZsdXNoQXVkaW9CdWZmZXIiLCJub3RpZnlDb25uZWN0aW9uU3RhdHVzIiwicmVhc29uIiwidGV4dCIsIm5vdGlmeVRyYW5zY3JpcHRpb24iLCJjb25uZWN0IiwiY29ubmVjdGVkIiwic2V0VGltZW91dCIsImRpc2Nvbm5lY3QiLCJhdWRpb0J1ZmZlciIsInNlbmRBdWRpbyIsImNodW5rIiwibGVuZ3RoIiwiZW1pdCIsInB1c2giLCJzaGlmdCIsIm9uVHJhbnNjcmlwdGlvbiIsImNhbGxiYWNrIiwidHJhbnNjcmlwdGlvbkNhbGxiYWNrcyIsImFkZCIsImRlbGV0ZSIsIm9uRXJyb3IiLCJlcnJvckNhbGxiYWNrcyIsIm9uQ29ubmVjdGlvbkNoYW5nZSIsImNvbm5lY3Rpb25DYWxsYmFja3MiLCJmb3JFYWNoIiwic3RhdHVzIiwiaXNTb2NrZXRDb25uZWN0ZWQiLCJnZXRSZWNvbm5lY3RBdHRlbXB0cyIsImdldFNvY2tldElkIiwiU2V0IiwiaW5pdFNvY2tldCIsImRhdGEiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiY3JlZGVudGlhbHMiLCJvayIsIkVycm9yIiwianNvbiIsIndlYnNvY2tldCIsIlNPQ0tFVF9VUkwiLCJwcm90b2NvbCIsImhvc3RuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/websocket-manager.ts\n"));

/***/ })

});